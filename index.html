<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teas & C's</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#6B7A5A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Teas & C's">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- QR Scanner Library -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: white;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 420px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
        }

        .header {
            background: #6B7A5A;
            color: white;
            padding: 30px 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo-container {
            margin-bottom: 15px;
        }

        .logo {
            width: 120px;
            height: auto;
            margin: 0 auto 10px;
            display: block;
        }

        .tagline {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .chair-info {
            background: #FF8C42;
            padding: 20px;
            text-align: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            border-radius: 0 0 20px 20px;
        }

        .menu-section {
            padding: 30px 20px;
            text-align: center;
            background: white;
        }

        .section-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 30px;
            color: #333;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .menu-item {
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .menu-item:hover {
            transform: scale(1.05);
        }

        .item-icon {
            width: 80px;
            height: 80px;
            background: #6B7A5A;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .item-icon img {
            width: 50px;
            height: 50px;
            object-fit: contain;
            filter: brightness(0) invert(1);
        }

        .item-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }

        .subsection {
            margin-bottom: 40px;
        }

        .subsection-title {
            font-size: 20px;
            margin-bottom: 20px;
            color: #333;
        }

        .item-list {
            text-align: left;
            max-width: 300px;
            margin: 0 auto;
        }

        .list-item {
            padding: 12px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s ease;
        }

        .list-item:hover {
            background-color: rgba(107, 122, 90, 0.1);
            margin: 0 -20px;
            padding-left: 20px;
            padding-right: 20px;
        }

        .list-item-name {
            font-size: 16px;
            color: #333;
        }

        .list-item-price {
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .cart-summary {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 420px;
            background: #6B7A5A;
            color: white;
            padding: 15px 20px;
            display: none;
            z-index: 200;
        }

        .cart-summary.show {
            display: block;
        }

        .cart-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .checkout-btn {
            width: 100%;
            background: white;
            color: #6B7A5A;
            border: none;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            background: #f0f0f0;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 350px;
            text-align: center;
            color: #333;
        }

        .modal h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .customize-section {
            margin: 20px 0;
            text-align: left;
        }

        .option-group {
            margin-bottom: 20px;
        }

        .option-label {
            font-weight: bold;
            margin-bottom: 10px;
            display: block;
            color: #333;
        }

        .option-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .option-btn {
            background: #6B7A5A;
            color: white;
            border: 2px solid transparent;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-btn.selected {
            border-color: #FF8C42;
            background: rgba(255, 140, 66, 0.2);
            color: #6B7A5A;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .qty-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
        }

        .quantity {
            font-size: 18px;
            font-weight: bold;
            min-width: 30px;
            text-align: center;
            color: #333;
        }

        .price-display {
            font-size: 20px;
            font-weight: bold;
            margin: 15px 0;
            color: #333;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .add-to-cart-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
        }

        .close-btn {
            background: transparent;
            color: #6B7A5A;
            border: 2px solid #6B7A5A;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
        }

        .rating-section {
            border-top: 1px solid rgba(0,0,0,0.1);
            padding-top: 20px;
            margin-top: 20px;
        }

        .back-home-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 15px;
            width: 100%;
        }

        .back-home-btn:hover {
            background: #5a6a4a;
        }

        .stars {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .star {
            font-size: 30px;
            color: rgba(0,0,0,0.3);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .star.active {
            color: #ffd700;
        }

        .submit-rating-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 15px;
            font-weight: bold;
        }

        .notification {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: #6B7A5A;
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            z-index: 500;
            display: none;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .copyright {
            text-align: center;
            padding: 20px;
            font-size: 12px;
            color: rgba(0,0,0,0.7);
            background: #f5f5f5;
            border-radius: 20px 20px 0 0;
        }

        .scan-qr-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }

        .scan-qr-btn:hover {
            background: #5a6a4a;
        }

        .qr-scanner-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
        }

        .qr-scanner-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 350px;
            text-align: center;
            color: #333;
        }

        .qr-scanner-content h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .qr-scanner-content p {
            margin-bottom: 20px;
            color: #666;
        }

        .qr-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #6B7A5A;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 20px;
            text-align: center;
        }

        .qr-input:focus {
            outline: none;
            border-color: #FF8C42;
        }

        .qr-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .qr-submit-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
        }

        .qr-cancel-btn {
            background: transparent;
            color: #6B7A5A;
            border: 2px solid #6B7A5A;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
        }

        .chair-number-display {
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        /* Animation for drink making */
        .drink-making-animation {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
        }

        .brewing-cup {
            width: 100%;
            height: 100%;
        }

        .filling-liquid {
            animation: fillUp 3s ease-in-out forwards;
        }

        @keyframes fillUp {
            0% { height: 0; y: 88; }
            50% { height: 30; y: 58; }
            100% { height: 46; y: 42; }
        }

        .bubble {
            animation: bubble 2s ease-in-out infinite;
        }

        .bubble:nth-child(1) { animation-delay: 0.5s; }
        .bubble:nth-child(2) { animation-delay: 1s; }
        .bubble:nth-child(3) { animation-delay: 1.5s; }
        .bubble:nth-child(4) { animation-delay: 0.8s; }

        @keyframes bubble {
            0% { opacity: 0; transform: translateY(0); }
            20% { opacity: 1; }
            100% { opacity: 0; transform: translateY(-20px); }
        }

        .brewing-steam ellipse {
            animation: brewingSteam 2.5s ease-in-out infinite;
        }

        .brewing-steam ellipse:nth-child(1) { animation-delay: 1s; }
        .brewing-steam ellipse:nth-child(2) { animation-delay: 1.2s; }
        .brewing-steam ellipse:nth-child(3) { animation-delay: 1.4s; }

        @keyframes brewingSteam {
            0%, 60% { opacity: 0; }
            70% { opacity: 0.6; }
            100% { opacity: 0; transform: translateY(-10px) scale(1.2); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Back Button -->
        <button class="back-btn" id="backBtn" onclick="goBack()">←</button>

        <!-- Header -->
        <div class="header">
            <div class="logo-container">
                <img src="Brand/Teasandcs Logo White.png" alt="Teas & C's Logo" class="logo">
            </div>
            <div class="tagline">Brewing perfection next door</div>
        </div>

        <!-- Chair Info -->
        <div class="chair-info">
            <div class="chair-number">Chair <span id="chairNumber" class="chair-number-display">One</span></div>
        </div>

        <!-- Main Menu Page -->
        <div class="page active" id="mainMenu">
            <div class="menu-section">
                <button type="button" class="scan-qr-btn" onclick="openQRScanner()">Scan Chair QR</button>
                <h2 class="section-title">Drinks Menu</h2>
                <div class="menu-grid">
                    <div class="menu-item" onclick="showCategory('hot-drinks')">
                        <div class="item-icon">
                            <img src="images/Tea-Icon.png" alt="Hot Drink">
                        </div>
                        <div class="item-name">Hot Drink</div>
                    </div>

                    <div class="menu-item" onclick="showCategory('cold-drinks')">
                        <div class="item-icon">
                            <img src="images/Cold-Coffee-Icon.png" alt="Cold Drink">
                        </div>
                        <div class="item-name">Cold Drink</div>
                    </div>

                    <div class="menu-item" onclick="showCategory('everyday-teas')">
                        <div class="item-icon">
                            <img src="images/Tea-Icon.png" alt="Everyday Teas">
                        </div>
                        <div class="item-name">Everyday<br>Teas</div>
                    </div>

                    <div class="menu-item" onclick="showCategory('matcha-teas')">
                        <div class="item-icon">
                            <img src="images/Macha-Cold-Icon.png" alt="Matcha Teas">
                        </div>
                        <div class="item-name">Matcha<br>Teas</div>
                    </div>

                    <div class="menu-item" onclick="showCategory('coffees')">
                        <div class="item-icon">
                            <img src="images/Coffee-Icon.png" alt="Coffees">
                        </div>
                        <div class="item-name">Coffees</div>
                    </div>

                    <div class="menu-item" onclick="showCategory('specialties')">
                        <div class="item-icon">
                            <img src="images/Tea-Icon.png" alt="Specialised Teas">
                        </div>
                        <div class="item-name">Specialised<br>Teas</div>
                    </div>
                </div>
            </div>
            <div class="copyright">2025 Teas & Cs. All rights reserved.</div>
        </div>

        <!-- Hot Drinks Page -->
        <div class="page" id="hot-drinks">
            <div class="menu-section">
                <h2 class="section-title">Hot Drinks</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Hot Tea', 3.6, 5.0, 'tea')">
                        <span class="list-item-name">Hot Tea</span>
                        <span class="list-item-price">£3.60</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Hot Coffee', 3.8, 5.2, 'coffee')">
                        <span class="list-item-name">Hot Coffee</span>
                        <span class="list-item-price">£3.80</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Hot Chocolate', 4.0, 5.4, 'specialty')">
                        <span class="list-item-name">Hot Chocolate</span>
                        <span class="list-item-price">£4.00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cold Drinks Page -->
        <div class="page" id="cold-drinks">
            <div class="menu-section">
                <h2 class="section-title">Cold Drinks</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Iced Tea', 4.2, 5.6, 'tea')">
                        <span class="list-item-name">Iced Tea</span>
                        <span class="list-item-price">£4.20</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Iced Coffee', 4.4, 5.8, 'coffee')">
                        <span class="list-item-name">Iced Coffee</span>
                        <span class="list-item-price">£4.40</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Cold Matcha', 4.6, 6.0, 'matcha')">
                        <span class="list-item-name">Cold Matcha</span>
                        <span class="list-item-price">£4.60</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Everyday Teas Page -->
        <div class="page" id="everyday-teas">
            <div class="menu-section">
                <h2 class="section-title">Everyday Teas</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('English Breakfast', 3.6, 5.0, 'tea')">
                        <span class="list-item-name">English Breakfast</span>
                        <span class="list-item-price">£3.60</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('English Breakfast Decaf', 3.6, 5.0, 'tea')">
                        <span class="list-item-name">English Breakfast Decaf</span>
                        <span class="list-item-price">£3.60</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Earl Grey', 3.6, 5.0, 'tea')">
                        <span class="list-item-name">Earl Grey</span>
                        <span class="list-item-price">£3.60</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Wild Mint', 3.6, 5.0, 'tea')">
                        <span class="list-item-name">Wild Mint</span>
                        <span class="list-item-price">£3.60</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Bush Tea', 3.6, 5.0, 'tea')">
                        <span class="list-item-name">Bush Tea</span>
                        <span class="list-item-price">£3.60</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Chamomile', 3.6, 5.0, 'tea')">
                        <span class="list-item-name">Chamomile</span>
                        <span class="list-item-price">£3.60</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Berry Burst', 3.6, 5.0, 'tea')">
                        <span class="list-item-name">Berry Burst</span>
                        <span class="list-item-price">£3.60</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Lemon & Ginger', 3.6, 5.0, 'tea')">
                        <span class="list-item-name">Lemon & Ginger</span>
                        <span class="list-item-price">£3.60</span>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">Premium Teas</h3>
                    <div class="item-list">
                        <div class="list-item" onclick="openCustomizeModal('Genmaicha Green Tea', 3.8, 5.2, 'tea')">
                            <span class="list-item-name">Genmaicha Green Tea</span>
                            <span class="list-item-price">£3.80</span>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Green Sencha Tea', 3.8, 5.2, 'tea')">
                            <span class="list-item-name">Green Sencha Tea</span>
                            <span class="list-item-price">£3.80</span>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Chocolate Noir Tea', 3.8, 5.2, 'tea')">
                            <span class="list-item-name">Chocolate Noir Tea</span>
                            <span class="list-item-price">£3.80</span>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Lychee & Rose Tea', 3.8, 5.2, 'tea')">
                            <span class="list-item-name">Lychee & Rose Tea</span>
                            <span class="list-item-price">£3.80</span>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">Rare Teas</h3>
                    <div class="item-list">
                        <div class="list-item" onclick="openCustomizeModal('Lychee & Rose Tea', 3.8, 5.2, 'tea')">
                            <span class="list-item-name">Lychee & Rose Tea</span>
                            <span class="list-item-price">£3.80</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Matcha Teas Page -->
        <div class="page" id="matcha-teas">
            <div class="menu-section">
                <h2 class="section-title">Matcha Teas</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Classic Matcha Latte', 4.2, 5.6, 'matcha')">
                        <span class="list-item-name">Classic Matcha Latte</span>
                        <span class="list-item-price">£4.20</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Vanilla Matcha Latte', 4.4, 5.8, 'matcha')">
                        <span class="list-item-name">Vanilla Matcha Latte</span>
                        <span class="list-item-price">£4.40</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Honey Matcha Latte', 4.4, 5.8, 'matcha')">
                        <span class="list-item-name">Honey Matcha Latte</span>
                        <span class="list-item-price">£4.40</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Coconut Matcha Latte', 4.4, 5.8, 'matcha')">
                        <span class="list-item-name">Coconut Matcha Latte</span>
                        <span class="list-item-price">£4.40</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coffees Page -->
        <div class="page" id="coffees">
            <div class="menu-section">
                <h2 class="section-title">Coffees</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Espresso', 2.8, 4.2, 'coffee')">
                        <span class="list-item-name">Espresso</span>
                        <span class="list-item-price">£2.80</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Americano', 3.2, 4.6, 'coffee')">
                        <span class="list-item-name">Americano</span>
                        <span class="list-item-price">£3.20</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Cappuccino', 3.6, 5.0, 'coffee')">
                        <span class="list-item-name">Cappuccino</span>
                        <span class="list-item-price">£3.60</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Latte', 3.8, 5.2, 'coffee')">
                        <span class="list-item-name">Latte</span>
                        <span class="list-item-price">£3.80</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Flat White', 3.8, 5.2, 'coffee')">
                        <span class="list-item-name">Flat White</span>
                        <span class="list-item-price">£3.80</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Mocha', 4.0, 5.4, 'coffee')">
                        <span class="list-item-name">Mocha</span>
                        <span class="list-item-price">£4.00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Specialties Page -->
        <div class="page" id="specialties">
            <div class="menu-section">
                <h2 class="section-title">Specialised Teas</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Hot Chocolate', 3.8, 5.2, 'specialty')">
                        <span class="list-item-name">Hot Chocolate</span>
                        <span class="list-item-price">£3.80</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Chai Latte', 4.0, 5.4, 'specialty')">
                        <span class="list-item-name">Chai Latte</span>
                        <span class="list-item-price">£4.00</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Golden Turmeric Latte', 4.2, 5.6, 'specialty')">
                        <span class="list-item-name">Golden Turmeric Latte</span>
                        <span class="list-item-price">£4.20</span>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Rose Latte', 4.2, 5.6, 'specialty')">
                        <span class="list-item-name">Rose Latte</span>
                        <span class="list-item-price">£4.20</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Customize Modal -->
        <div class="modal" id="customizeModal">
            <div class="modal-content">
                <h3 id="modalTitle">Customize Your Drink</h3>
                
                <div class="customize-section">
                    <div class="option-group">
                        <label class="option-label">Size:</label>
                        <div class="option-grid">
                            <button class="option-btn selected" data-size="regular" data-price="0">Regular</button>
                            <button class="option-btn" data-size="large" data-price="1.4">Large</button>
                        </div>
                    </div>

                    <div class="option-group">
                        <label class="option-label">Milk:</label>
                        <div class="option-grid">
                            <button class="option-btn selected" data-milk="whole" data-price="0">Whole</button>
                            <button class="option-btn" data-milk="skim" data-price="0">Skim</button>
                            <button class="option-btn" data-milk="oat" data-price="0.3">Oat</button>
                            <button class="option-btn" data-milk="almond" data-price="0.3">Almond</button>
                            <button class="option-btn" data-milk="soy" data-price="0.3">Soy</button>
                            <button class="option-btn" data-milk="none" data-price="0">None</button>
                        </div>
                    </div>

                    <div class="option-group">
                        <label class="option-label">Sweetener:</label>
                        <div class="option-grid">
                            <button class="option-btn selected" data-sweetener="none" data-price="0">None</button>
                            <button class="option-btn" data-sweetener="sugar" data-price="0">Sugar</button>
                            <button class="option-btn" data-sweetener="honey" data-price="0.2">Honey</button>
                            <button class="option-btn" data-sweetener="stevia" data-price="0.2">Stevia</button>
                        </div>
                    </div>

                    <div class="quantity-controls">
                        <button class="qty-btn" onclick="changeQuantity(-1)">-</button>
                        <span class="quantity" id="quantity">1</span>
                        <button class="qty-btn" onclick="changeQuantity(1)">+</button>
                    </div>

                    <div class="price-display">
                        Total: £<span id="totalPrice">0.00</span>
                    </div>
                </div>

                <div class="modal-buttons">
                    <button class="add-to-cart-btn" onclick="addToCart()">Add to Cart</button>
                    <button class="close-btn" onclick="closeModal()">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Order Confirmation Page -->
        <div class="page" id="orderConfirmation">
            <div class="menu-section">
                <h2 class="section-title">Order Confirmed!</h2>
                
                <div class="drink-making-animation">
                    <svg class="brewing-cup" viewBox="0 0 100 100">
                        <!-- Cup -->
                        <path d="M20 30 L20 80 Q20 90 30 90 L70 90 Q80 90 80 80 L80 30 Z" fill="#8B4513" stroke="#654321" stroke-width="2"/>
                        <!-- Handle -->
                        <path d="M80 40 Q90 40 90 50 Q90 60 80 60" fill="none" stroke="#654321" stroke-width="3"/>
                        <!-- Liquid -->
                        <rect class="filling-liquid" x="22" y="42" width="56" height="46" fill="#8B4513"/>
                        <!-- Bubbles -->
                        <circle class="bubble" cx="35" cy="70" r="2" fill="white" opacity="0.7"/>
                        <circle class="bubble" cx="45" cy="65" r="1.5" fill="white" opacity="0.7"/>
                        <circle class="bubble" cx="55" cy="68" r="1" fill="white" opacity="0.7"/>
                        <circle class="bubble" cx="65" cy="72" r="1.5" fill="white" opacity="0.7"/>
                        <!-- Steam -->
                        <g class="brewing-steam">
                            <ellipse cx="40" cy="25" rx="3" ry="8" fill="white" opacity="0.6"/>
                            <ellipse cx="50" cy="20" rx="2" ry="6" fill="white" opacity="0.6"/>
                            <ellipse cx="60" cy="25" rx="3" ry="8" fill="white" opacity="0.6"/>
                        </g>
                    </svg>
                </div>

                <div style="text-align: center; margin: 20px 0;">
                    <p style="font-size: 18px; margin-bottom: 10px;">Your drink is being prepared!</p>
                    <p style="font-size: 14px; opacity: 0.8;">Please wait at your chair</p>
                </div>

                <div class="rating-section">
                    <h3 style="text-align: center; margin-bottom: 15px;">Rate your experience</h3>
                    <div class="stars">
                        <span class="star" onclick="setRating(1)">★</span>
                        <span class="star" onclick="setRating(2)">★</span>
                        <span class="star" onclick="setRating(3)">★</span>
                        <span class="star" onclick="setRating(4)">★</span>
                        <span class="star" onclick="setRating(5)">★</span>
                    </div>
                    <button class="submit-rating-btn" onclick="submitRating()">Submit Rating</button>
                </div>

                <button class="back-home-btn" onclick="goToMainMenu()">Back to Menu</button>
            </div>
        </div>

        <!-- Cart Summary -->
        <div class="cart-summary" id="cartSummary">
            <div class="cart-info">
                <span>Cart: <span id="cartCount">0</span> items</span>
                <span>Total: £<span id="cartTotal">0.00</span></span>
            </div>
            <button class="checkout-btn" onclick="checkout()">Checkout</button>
        </div>

        <!-- QR Scanner Modal -->
        <div class="qr-scanner-modal" id="qrScannerModal">
            <div class="qr-scanner-content">
                <h3>Scan Chair QR Code</h3>
                <p>Point your camera at the QR code on your table or enter the chair number manually</p>
                
                <!-- QR Scanner Container -->
                <div id="qr-reader" style="width: 100%; margin: 20px 0;"></div>
                
                <!-- Manual Input Section -->
                <div style="border-top: 1px solid #eee; padding-top: 20px; margin-top: 20px;">
                    <p style="margin-bottom: 10px; color: #666;">Or enter chair number manually:</p>
                    <input type="text" class="qr-input" id="qrInput" placeholder="Enter chair number (1-8)" maxlength="1" pattern="[1-8]">
                </div>
                
                <div class="qr-buttons">
                    <button type="button" class="qr-submit-btn" onclick="submitChairNumber()">Set Chair</button>
                    <button type="button" class="qr-cancel-btn" onclick="closeQRScanner()">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Notification -->
        <div class="notification" id="notification"></div>
    </div>

    <script>
        // Global variables
        let currentPage = 'mainMenu';
        let cart = [];
        let currentItem = null;
        let selectedOptions = {
            size: 'regular',
            milk: 'whole',
            sweetener: 'none'
        };
        let quantity = 1;
        let basePrice = 0;
        let largePrice = 0;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            updateCartDisplay();
            generateChairNumber();
        });

        // Generate random chair number
        function generateChairNumber() {
            const chairs = ['One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight'];
            const randomChair = chairs[Math.floor(Math.random() * chairs.length)];
            document.getElementById('chairNumber').textContent = randomChair;
        }

        // QR Scanner functions
        let html5QrcodeScanner = null;

        function openQRScanner() {
            document.getElementById('qrScannerModal').style.display = 'block';
            document.getElementById('qrInput').focus();
            
            // Initialize QR scanner
            if (!html5QrcodeScanner) {
                html5QrcodeScanner = new Html5QrcodeScanner(
                    "qr-reader",
                    { 
                        fps: 10, 
                        qrbox: { width: 250, height: 250 },
                        aspectRatio: 1.0
                    },
                    false
                );
                
                html5QrcodeScanner.render(onScanSuccess, onScanFailure);
            }
        }

        function closeQRScanner() {
            document.getElementById('qrScannerModal').style.display = 'none';
            document.getElementById('qrInput').value = '';
            
            // Stop QR scanner
            if (html5QrcodeScanner) {
                html5QrcodeScanner.clear();
                html5QrcodeScanner = null;
            }
        }

        function onScanSuccess(decodedText, decodedResult) {
            // Handle QR code scan success
            console.log(`QR Code scanned: ${decodedText}`);
            
            // Extract chair number from QR code
            // Assuming QR codes contain text like "chair 1", "chair1", "1", etc.
            const chairMatch = decodedText.toLowerCase().match(/chair\s*(\d+)|^(\d+)$/);
            if (chairMatch) {
                const chairNumber = parseInt(chairMatch[1] || chairMatch[2]);
                if (chairNumber >= 1 && chairNumber <= 8) {
                    setChairNumber(chairNumber);
                    closeQRScanner();
                    showNotification(`Chair ${getChairName(chairNumber)} detected!`);
                } else {
                    showNotification('Invalid chair number in QR code');
                }
            } else {
                showNotification('QR code does not contain a valid chair number');
            }
        }

        function onScanFailure(error) {
            // Handle scan failure silently
            console.log(`QR scan failed: ${error}`);
        }

        function submitChairNumber() {
            const input = document.getElementById('qrInput').value.trim();
            const chairNumber = parseInt(input);
            
            if (chairNumber >= 1 && chairNumber <= 8) {
                setChairNumber(chairNumber);
                closeQRScanner();
                showNotification(`Chair ${getChairName(chairNumber)} selected!`);
            } else {
                showNotification('Please enter a valid chair number (1-8)');
                document.getElementById('qrInput').focus();
            }
        }

        function setChairNumber(chairNumber) {
            const chairNames = ['One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight'];
            document.getElementById('chairNumber').textContent = chairNames[chairNumber - 1];
        }

        function getChairName(chairNumber) {
            const chairNames = ['One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight'];
            return chairNames[chairNumber - 1];
        }

        // Handle Enter key in QR input
        document.addEventListener('DOMContentLoaded', function() {
            const qrInput = document.getElementById('qrInput');
            if (qrInput) {
                qrInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        submitChairNumber();
                    }
                });
            }
        });

        // Navigation functions
        function showCategory(category) {
            hideAllPages();
            document.getElementById(category).classList.add('active');
            document.getElementById('backBtn').style.display = 'flex';
            currentPage = category;
        }

        function goBack() {
            if (currentPage !== 'mainMenu') {
                hideAllPages();
                document.getElementById('mainMenu').classList.add('active');
                document.getElementById('backBtn').style.display = 'none';
                currentPage = 'mainMenu';
            }
        }

        function goToMainMenu() {
            hideAllPages();
            document.getElementById('mainMenu').classList.add('active');
            document.getElementById('backBtn').style.display = 'none';
            currentPage = 'mainMenu';
            cart = [];
            updateCartDisplay();
        }

        function hideAllPages() {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
        }

        // Modal functions
        function openCustomizeModal(name, regularPrice, largePrice, type) {
            currentItem = { name, type };
            basePrice = regularPrice;
            this.largePrice = largePrice;
            selectedOptions = { size: 'regular', milk: 'whole', sweetener: 'none' };
            quantity = 1;
            
            document.getElementById('modalTitle').textContent = `Customize ${name}`;
            document.getElementById('quantity').textContent = quantity;
            updateModalPrice();
            
            // Reset button selections
            document.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
            document.querySelectorAll('[data-size="regular"]').forEach(btn => btn.classList.add('selected'));
            document.querySelectorAll('[data-milk="whole"]').forEach(btn => btn.classList.add('selected'));
            document.querySelectorAll('[data-sweetener="none"]').forEach(btn => btn.classList.add('selected'));
            
            document.getElementById('customizeModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('customizeModal').style.display = 'none';
        }

        function changeQuantity(delta) {
            quantity = Math.max(1, quantity + delta);
            document.getElementById('quantity').textContent = quantity;
            updateModalPrice();
        }

        function updateModalPrice() {
            let total = basePrice;
            
            // Add size price
            if (selectedOptions.size === 'large') {
                total = largePrice;
            }
            
            // Add milk price
            const milkBtn = document.querySelector(`[data-milk="${selectedOptions.milk}"]`);
            if (milkBtn) {
                total += parseFloat(milkBtn.dataset.price);
            }
            
            // Add sweetener price
            const sweetenerBtn = document.querySelector(`[data-sweetener="${selectedOptions.sweetener}"]`);
            if (sweetenerBtn) {
                total += parseFloat(sweetenerBtn.dataset.price);
            }
            
            total *= quantity;
            document.getElementById('totalPrice').textContent = total.toFixed(2);
        }

        function addToCart() {
            const item = {
                name: currentItem.name,
                type: currentItem.type,
                size: selectedOptions.size,
                milk: selectedOptions.milk,
                sweetener: selectedOptions.sweetener,
                quantity: quantity,
                price: parseFloat(document.getElementById('totalPrice').textContent)
            };
            
            cart.push(item);
            updateCartDisplay();
            closeModal();
            showNotification('Added to cart!');
        }

        function updateCartDisplay() {
            const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);
            
            document.getElementById('cartCount').textContent = cartCount;
            document.getElementById('cartTotal').textContent = cartTotal.toFixed(2);
            
            if (cartCount > 0) {
                document.getElementById('cartSummary').classList.add('show');
            } else {
                document.getElementById('cartSummary').classList.remove('show');
            }
        }

        function checkout() {
            if (cart.length === 0) return;
            
            hideAllPages();
            document.getElementById('orderConfirmation').classList.add('active');
            document.getElementById('backBtn').style.display = 'none';
            currentPage = 'orderConfirmation';
        }

        function setRating(rating) {
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function submitRating() {
            const activeStars = document.querySelectorAll('.star.active').length;
            if (activeStars > 0) {
                showNotification('Thank you for your rating!');
                setTimeout(() => {
                    goToMainMenu();
                }, 1500);
            }
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
        }

        // Event listeners for option buttons
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('option-btn')) {
                const group = e.target.parentElement;
                const buttons = group.querySelectorAll('.option-btn');
                buttons.forEach(btn => btn.classList.remove('selected'));
                e.target.classList.add('selected');
                
                // Update selected options
                if (e.target.dataset.size) {
                    selectedOptions.size = e.target.dataset.size;
                }
                if (e.target.dataset.milk) {
                    selectedOptions.milk = e.target.dataset.milk;
                }
                if (e.target.dataset.sweetener) {
                    selectedOptions.sweetener = e.target.dataset.sweetener;
                }
                
                updateModalPrice();
            }
        });

        // Close modal when clicking outside
        document.getElementById('customizeModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Close QR scanner modal when clicking outside
        document.getElementById('qrScannerModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeQRScanner();
            }
        });

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
</body>
</html>
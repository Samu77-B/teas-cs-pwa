<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teas & C's - Fresh Update</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#6B7A5A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Teas & C's">
    <link rel="apple-touch-icon" href="Brand/Teasandcs Logo White.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- QR Scanner Library -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    
    <!-- EmailJS Library -->
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: white;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 420px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
        }

        .header {
            background: #6B7A5A;
            color: white;
            padding: 30px 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            animation: slideDownFromTop 0.8s ease-out;
        }

        .minimal-header {
            padding: 25px 20px;
            z-index: 100;
            min-height: 90px;
        }

        .minimal-header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .minimal-back-btn {
            position: static;
            background: #FF8C42;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 200;
        }

        .minimal-back-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .minimal-home-btn {
            position: static;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 200;
        }

        .minimal-home-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        .minimal-title {
            font-size: 16px;
            font-weight: 600;
            color: white;
            flex-grow: 1;
            text-align: center;
            margin: 0; /* Remove all margins to ensure perfect centering */
            line-height: 1.2;
        }

        .logo-container {
            margin-bottom: 15px;
        }

        .logo {
            width: 120px;
            height: auto;
            margin: 0 auto 10px;
            display: block;
            animation: fadeInScale 1s ease-out;
        }

        .tagline {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 5px;
            animation: fadeInUp 0.6s ease-out 0.3s both;
        }

        .chair-info {
            background: #FF8C42;
            padding: 20px;
            text-align: center;
            color: white;
            font-size: 18px;
            font-weight: 600;
            border-radius: 0 0 20px 20px;
            animation: slideDownFromUnderHeader 0.8s ease-out 0.8s both;
        }

        .menu-section {
            padding: 30px 20px;
            text-align: center;
            background: white;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 30px;
            color: #333;
            animation: fadeInUp 0.8s ease-out;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .menu-item {
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: fadeInUp 0.6s ease-out both;
        }

        .menu-item:nth-child(1) { animation-delay: 0.1s; }
        .menu-item:nth-child(2) { animation-delay: 0.2s; }
        .menu-item:nth-child(3) { animation-delay: 0.3s; }
        .menu-item:nth-child(4) { animation-delay: 0.4s; }
        .menu-item:nth-child(5) { animation-delay: 0.5s; }
        .menu-item:nth-child(6) { animation-delay: 0.6s; }

        .menu-item:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 10px 25px rgba(107, 122, 90, 0.2);
        }

        .item-icon {
            width: 80px;
            height: 80px;
            background: #6B7A5A;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .item-icon:hover {
            transform: rotate(5deg) scale(1.1);
            box-shadow: 0 8px 20px rgba(107, 122, 90, 0.3);
        }

        .item-icon img {
            width: 50px;
            height: 50px;
            object-fit: contain;
            filter: brightness(0) invert(1);
        }

        .item-icon svg {
            width: 50px;
            height: 50px;
            color: white;
            stroke: white;
            fill: none;
        }

        .item-name {
            font-size: 16px;
            font-weight: 500;
            color: #333;
            line-height: 1.2;
        }

        .subsection {
            margin-bottom: 40px;
        }

        .subsection-title {
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 20px;
            color: #333;
        }

        .item-list {
            text-align: left;
            max-width: 300px;
            margin: 0 auto;
        }

        .list-item {
            padding: 12px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            animation: slideInLeft 0.5s ease-out both;
        }

        .list-item:nth-child(1) { animation-delay: 0.1s; }
        .list-item:nth-child(2) { animation-delay: 0.2s; }
        .list-item:nth-child(3) { animation-delay: 0.3s; }
        .list-item:nth-child(4) { animation-delay: 0.4s; }
        .list-item:nth-child(5) { animation-delay: 0.5s; }
        .list-item:nth-child(6) { animation-delay: 0.6s; }
        .list-item:nth-child(7) { animation-delay: 0.7s; }
        .list-item:nth-child(8) { animation-delay: 0.8s; }

        .list-item:hover {
            background-color: rgba(107, 122, 90, 0.1);
            margin: 0 -20px;
            padding-left: 20px;
            padding-right: 20px;
            transform: translateX(10px);
            box-shadow: 0 5px 15px rgba(107, 122, 90, 0.1);
        }

        .list-item-name {
            font-size: 16px;
            color: #333;
        }

        .list-item-price {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            text-align: right;
        }

        .price-container {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 4px;
        }

        .original-price {
            font-size: 13px;
            color: #999;
            font-weight: 400;
            text-decoration: line-through;
        }

        .discounted-price {
            font-size: 14px;
            font-weight: 600;
            color: #FF8C42;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .basket-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .basket-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        .fixed-home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .fixed-home-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        .basket-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #FF8C42;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeInScale 0.3s ease-out;
        }

        .cart-summary {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 420px;
            background: #6B7A5A;
            color: white;
            padding: 15px 20px;
            display: none;
            z-index: 200;
        }

        .cart-summary.show {
            display: block;
        }

        .cart-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .cart-summary .continue-shopping-btn {
            width: 100%;
            background: transparent;
            color: white;
            border: 2px solid white;
            padding: 10px;
            font-size: 14px;
            font-weight: 600;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 8px;
        }

        .cart-summary .continue-shopping-btn:hover {
            background: white;
            color: #6B7A5A;
        }

        .cart-summary .checkout-btn {
            width: 100%;
            background: white;
            color: #6B7A5A;
            border: none;
            padding: 12px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: fadeInUp 0.6s ease-out;
        }

        .cart-summary .checkout-btn:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(107, 122, 90, 0.2);
        }

        .basket-items {
            margin-bottom: 30px;
        }

        .basket-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            animation: slideInLeft 0.5s ease-out both;
        }

        .basket-item:nth-child(1) { animation-delay: 0.1s; }
        .basket-item:nth-child(2) { animation-delay: 0.2s; }
        .basket-item:nth-child(3) { animation-delay: 0.3s; }
        .basket-item:nth-child(4) { animation-delay: 0.4s; }

        .basket-item-info {
            flex-grow: 1;
        }

        .basket-item-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .basket-item-details {
            font-size: 14px;
            color: #666;
            margin-bottom: 4px;
        }

        .basket-item-price {
            font-size: 16px;
            font-weight: 600;
            color: #FF8C42;
        }

        .basket-item-remove {
            background: none;
            border: none;
            color: #999;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
            margin-left: 10px;
            transition: color 0.3s ease;
        }

        .basket-item-remove:hover {
            color: #FF8C42;
        }

        .basket-summary {
            border-top: 2px solid rgba(0,0,0,0.1);
            padding-top: 20px;
        }

        .basket-total {
            text-align: center;
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
        }

        .basket-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .basket-buttons .continue-shopping-btn {
            background: transparent;
            color: #6B7A5A;
            border: 2px solid #6B7A5A;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .basket-buttons .continue-shopping-btn:hover {
            background: #6B7A5A;
            color: white;
        }

        .basket-buttons .checkout-btn {
            background: #FF8C42;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .basket-buttons .checkout-btn:hover {
            background: #e67e22;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 140, 66, 0.3);
        }

        .order-message-section {
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, rgba(107, 122, 90, 0.15), rgba(255, 140, 66, 0.1));
            border-radius: 15px;
            border: 2px solid rgba(107, 122, 90, 0.3);
            box-shadow: 0 4px 15px rgba(107, 122, 90, 0.1);
        }

        .message-label {
            display: block;
            color: #6B7A5A;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .customer-email {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 140, 66, 0.3);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(255, 140, 66, 0.1);
        }

        .customer-email:focus {
            outline: none;
            border-color: #FF8C42;
            background: white;
            box-shadow: 0 0 0 3px rgba(255, 140, 66, 0.1);
            transform: scale(1.02);
        }

        .order-message {
            width: 100%;
            min-height: 80px;
            padding: 15px;
            border: 2px solid rgba(255, 140, 66, 0.3);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            resize: vertical;
            transition: all 0.3s ease;
            text-align: left;
            box-shadow: 0 2px 10px rgba(255, 140, 66, 0.1);
        }

        .order-message:focus {
            outline: none;
            border-color: #FF8C42;
            background: white;
            box-shadow: 0 0 0 3px rgba(255, 140, 66, 0.1);
            transform: scale(1.02);
        }

        .order-message-section {
            animation: fadeInUp 0.5s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .order-message::placeholder {
            color: #666;
            font-style: italic;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            animation: fadeInScale 0.3s ease-out;
        }

        .modal.show {
            display: block;
        }

        .modal-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 350px;
            max-height: 75vh;
            overflow-y: auto;
            text-align: center;
            color: #333;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            z-index: 1001;
        }

        .modal h3 {
            color: #333;
            margin: 20px 20px 15px 20px;
            font-size: 18px;
            font-weight: 600;
        }

        .customize-section {
            margin: 10px 20px;
            text-align: left;
        }

        .option-group {
            margin-bottom: 12px;
        }

        .option-label {
            font-weight: 500;
            margin-bottom: 8px;
            display: block;
            color: #333;
            font-size: 14px;
        }

        .option-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 6px;
            margin-bottom: 12px;
        }

        .option-btn {
            background: #6B7A5A;
            color: white;
            border: 2px solid transparent;
            padding: 5px 8px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .option-btn.selected {
            border-color: #FF8C42;
            background: rgba(255, 140, 66, 0.2);
            color: #6B7A5A;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 12px 0;
        }

        .qty-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
        }

        .quantity {
            font-size: 18px;
            font-weight: 600;
            min-width: 30px;
            text-align: center;
            color: #333;
        }

        .price-display {
            font-size: 18px;
            font-weight: 600;
            margin: 12px 0;
            color: #333;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 12px 20px 20px 20px;
        }

        .add-to-cart-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .add-to-cart-btn:hover {
            background: #5a6a4a;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(107, 122, 90, 0.3);
        }

        .close-btn {
            background: transparent;
            color: #6B7A5A;
            border: 2px solid #6B7A5A;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
        }

        .checkout-btn {
            background: #FF8C42;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            background: #e67e22;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 140, 66, 0.3);
        }

        .continue-shopping-btn {
            background: transparent;
            color: #6B7A5A;
            border: 2px solid #6B7A5A;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .continue-shopping-btn:hover {
            background: #6B7A5A;
            color: white;
        }

        .rating-section {
            border-top: 1px solid rgba(0,0,0,0.1);
            padding-top: 20px;
            margin-top: 20px;
        }

        .back-home-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 15px;
            width: 100%;
        }

        .back-home-btn:hover {
            background: #5a6a4a;
        }

        .stars {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .star {
            font-size: 30px;
            color: rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            animation: fadeInScale 0.5s ease-out both;
        }

        .star:nth-child(1) { animation-delay: 0.1s; }
        .star:nth-child(2) { animation-delay: 0.2s; }
        .star:nth-child(3) { animation-delay: 0.3s; }
        .star:nth-child(4) { animation-delay: 0.4s; }
        .star:nth-child(5) { animation-delay: 0.5s; }

        .star:hover {
            transform: scale(1.2);
        }

        .star.active {
            color: #ffd700;
            animation: pulse 0.6s ease-out;
        }

        .submit-rating-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 15px;
            font-weight: 600;
        }

        .notification {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: #6B7A5A;
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            z-index: 500;
            display: none;
            animation: bounce 0.6s ease-out;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .copyright {
            text-align: center;
            padding: 20px;
            font-size: 12px;
            color: rgba(0,0,0,0.7);
            background: #f5f5f5;
            border-radius: 20px 20px 0 0;
        }

        .copyright a {
            color: #6B7A5A;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .copyright a:hover {
            color: #FF8C42;
        }

        .scan-qr-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
            animation: fadeInUp 0.8s ease-out 0.7s both;
        }

        .scan-qr-btn:hover {
            background: #5a6a4a;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(107, 122, 90, 0.3);
        }

        .qr-scanner-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
        }

        .qr-scanner-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 350px;
            text-align: center;
            color: #333;
        }

        .qr-scanner-content h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: 600;
        }

        .qr-scanner-content p {
            margin-bottom: 20px;
            color: #666;
        }

        .qr-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #6B7A5A;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 20px;
            text-align: center;
        }

        .qr-input:focus {
            outline: none;
            border-color: #FF8C42;
        }

        .qr-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .qr-submit-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
        }

        .qr-cancel-btn {
            background: transparent;
            color: #6B7A5A;
            border: 2px solid #6B7A5A;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
        }

        .camera-permissions {
            text-align: center;
            padding: 30px 20px;
            background: #f8f9fa;
            border-radius: 15px;
            margin: 20px 0;
        }

        .camera-icon {
            margin-bottom: 20px;
        }

        .camera-permissions h4 {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .camera-permissions p {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .camera-permission-btn {
            background: #6B7A5A;
            color: white;
            border: none;
            padding: 15px 25px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 0 auto 15px;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .camera-permission-btn:hover {
            background: #5a6a4a;
            transform: translateY(-2px);
        }

        .camera-alternative {
            font-size: 14px;
            color: #666;
            margin-top: 15px;
        }

        .text-link {
            background: none;
            border: none;
            color: #6B7A5A;
            text-decoration: underline;
            cursor: pointer;
            font-weight: 500;
            padding: 0;
            font-size: 14px;
        }

        .text-link:hover {
            color: #FF8C42;
        }

        #manualInput h4 {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            text-align: center;
        }

        .chair-number-display {
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        /* Coffee GIF Animation */
        .drink-making-animation {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .coffee-gif {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* Premium Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDownFromTop {
            from {
                opacity: 0;
                transform: translateY(-100px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDownFromUnderHeader {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200px 0;
            }
            100% {
                background-position: calc(200px + 100%) 0;
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% {
                transform: translate3d(0,0,0);
            }
            40%, 43% {
                transform: translate3d(0, -30px, 0);
            }
            70% {
                transform: translate3d(0, -15px, 0);
            }
            90% {
                transform: translate3d(0, -4px, 0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Back Button -->
        <button class="back-btn" id="backBtn" onclick="goBack()">←</button>

        <!-- Shopping Basket Icon -->
        <button class="basket-btn" id="basketBtn" onclick="showBasket()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                <line x1="3" y1="6" x2="21" y2="6"/>
                <path d="M16 10a4 4 0 0 1-8 0"/>
            </svg>
            <span class="basket-count" id="basketCount">0</span>
        </button>

        <!-- Header -->
        <div class="header" id="mainHeader">
            <div class="logo-container">
                <img src="Brand/Teasandcs Logo White.png" alt="Teas & C's Logo" class="logo">
            </div>
            <div class="tagline">Brewing perfection next door</div>
        </div>

        <!-- Minimal Header for Menu Pages -->
        <div class="header minimal-header" id="minimalHeader" style="display: none;">
            <div class="minimal-header-content">
                <div class="minimal-title">Brewing perfection next door</div>
                <button class="back-btn minimal-back-btn" onclick="goBack()">←</button>
            </div>
        </div>

        <!-- Fixed Home Button -->
        <button class="home-btn fixed-home-btn" id="fixedHomeBtn" onclick="goToMainMenu()" style="display: none;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9,22 9,12 15,12 15,22"/>
            </svg>
        </button>

        <!-- Chair Info -->
        <div class="chair-info">
            <div class="chair-number">Chair <span id="chairNumber" class="chair-number-display">One</span></div>
        </div>

        <!-- Main Menu Page -->
        <div class="page active" id="mainMenu">
            <div class="menu-section">
                <button type="button" class="scan-qr-btn" onclick="openQRScanner()">Scan Chair QR</button>
                <h2 class="section-title">Drinks Menu</h2>
                <div class="menu-grid">
                                         <div class="menu-item" onclick="showCategory('hot-drinks')">
                         <div class="item-icon">
                             <img src="images/hot-drinks.png" alt="Hot Drinks">
                         </div>
                         <div class="item-name">Hot Drinks</div>
                     </div>

                     <div class="menu-item" onclick="showCategory('cold-drinks')">
                         <div class="item-icon">
                             <img src="images/cold-drinks.png" alt="Cold Drinks">
                         </div>
                         <div class="item-name">Cold Drinks</div>
                     </div>

                     <div class="menu-item" onclick="showCategory('everyday-teas')">
                         <div class="item-icon">
                             <img src="images/tea.png" alt="Loose Leaf Tea">
                         </div>
                         <div class="item-name">Loose Leaf<br>Tea</div>
                     </div>

                     <div class="menu-item" onclick="showCategory('matcha-teas')">
                         <div class="item-icon">
                             <img src="images/matcha.png" alt="Matcha" style="max-width: 100%; height: auto;">
                         </div>
                         <div class="item-name">Matcha</div>
                     </div>

                     <div class="menu-item" onclick="showCategory('coffees')">
                         <div class="item-icon">
                             <img src="images/hot-drinks.png" alt="Coffee">
                         </div>
                         <div class="item-name">Coffee</div>
                     </div>

                     <div class="menu-item" onclick="showCategory('specialties')">
                         <div class="item-icon">
                             <img src="images/special.png" alt="Specials" style="max-width: 100%; height: auto;">
                         </div>
                         <div class="item-name">Specials</div>
                     </div>
                </div>
            </div>
            <div class="copyright">
                2025 Teas & Cs. All rights reserved.<br>
                Designed, built & maintained by <a href="https://paul-banning.com" target="_blank" rel="noopener noreferrer">Paul Banning</a>
            </div>
        </div>

        <!-- Hot Drinks Page -->
        <div class="page" id="hot-drinks">
            <div class="menu-section">
                <h2 class="section-title">Hot Drinks</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Breakfast Tea', 2.72, 3.84, 'tea')">
                        <span class="list-item-name">Breakfast Tea</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.40</span>
                            <span class="discounted-price">Your price £2.72</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Earl Grey', 2.88, 4.0, 'tea')">
                        <span class="list-item-name">Earl Grey</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.60</span>
                            <span class="discounted-price">Your price £2.88</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Flat White', 2.72, 3.84, 'coffee')">
                        <span class="list-item-name">Flat White</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.40</span>
                            <span class="discounted-price">Your price £2.72</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Latte', 2.88, 4.0, 'coffee')">
                        <span class="list-item-name">Latte</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.60</span>
                            <span class="discounted-price">Your price £2.88</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Cappuccino', 2.88, 4.0, 'coffee')">
                        <span class="list-item-name">Cappuccino</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.60</span>
                            <span class="discounted-price">Your price £2.88</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Mork 50% Chocolate', 2.88, 4.0, 'specialty')">
                        <span class="list-item-name">Mork 50% Chocolate</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.60</span>
                            <span class="discounted-price">Your price £2.88</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                2025 Teas & Cs. All rights reserved.<br>
                Designed, built & maintained by <a href="https://paul-banning.com" target="_blank" rel="noopener noreferrer">Paul Banning</a>
            </div>
        </div>

        <!-- Cold Drinks Page -->
        <div class="page" id="cold-drinks">
            <div class="menu-section">
                <h2 class="section-title">Cold Drinks</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Pistachio Latte', 3.36, 4.48, 'coffee')">
                        <span class="list-item-name">Pistachio Latte</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.20</span>
                            <span class="discounted-price">Your price £3.36</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Strawberry Iced Chocolate', 3.52, 4.64, 'specialty')">
                        <span class="list-item-name">Strawberry Iced Chocolate</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.40</span>
                            <span class="discounted-price">Your price £3.52</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Classic Matcha Latte', 3.36, 4.48, 'matcha')">
                        <span class="list-item-name">Classic Matcha Latte</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.20</span>
                            <span class="discounted-price">Your price £3.36</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Sparkling Rose & Hibiscus', 2.56, 3.68, 'specialty')">
                        <span class="list-item-name">Sparkling Rose & Hibiscus</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.20</span>
                            <span class="discounted-price">Your price £2.56</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                2025 Teas & Cs. All rights reserved.<br>
                Designed, built & maintained by <a href="https://paul-banning.com" target="_blank" rel="noopener noreferrer">Paul Banning</a>
            </div>
        </div>

        <!-- Everyday Teas Page -->
        <div class="page" id="everyday-teas">
            <div class="menu-section">
                <h2 class="section-title">Loose Leaf Tea</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Milk Oolong', 3.2, 4.32, 'tea')">
                        <span class="list-item-name">Milk Oolong</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.00</span>
                            <span class="discounted-price">Your price £3.20</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Breakfast Tea', 2.72, 3.84, 'tea')">
                        <span class="list-item-name">Breakfast Tea</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.40</span>
                            <span class="discounted-price">Your price £2.72</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Earl Grey', 2.88, 4.0, 'tea')">
                        <span class="list-item-name">Earl Grey</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.60</span>
                            <span class="discounted-price">Your price £2.88</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Wild Mint', 2.88, 4.0, 'tea')">
                        <span class="list-item-name">Wild Mint</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.60</span>
                            <span class="discounted-price">Your price £2.88</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Berry Tea', 2.88, 4.0, 'tea')">
                        <span class="list-item-name">Berry Tea</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.60</span>
                            <span class="discounted-price">Your price £2.88</span>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">Premium Teas</h3>
                    <div class="item-list">
                        <div class="list-item" onclick="openCustomizeModal('Genmaicha Green Tea', 3.04, 4.16, 'tea')">
                            <span class="list-item-name">Genmaicha Green Tea</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £3.80</span>
                                <span class="discounted-price">Your price £3.04</span>
                            </div>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Green Sencha Tea', 3.04, 4.16, 'tea')">
                            <span class="list-item-name">Green Sencha Tea</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £3.80</span>
                                <span class="discounted-price">Your price £3.04</span>
                            </div>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Chocolate Noir Tea', 3.04, 4.16, 'tea')">
                            <span class="list-item-name">Chocolate Noir Tea</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £3.80</span>
                                <span class="discounted-price">Your price £3.04</span>
                            </div>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Lychee & Rose Tea', 3.04, 4.16, 'tea')">
                            <span class="list-item-name">Lychee & Rose Tea</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £3.80</span>
                                <span class="discounted-price">Your price £3.04</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="subsection">
                    <h3 class="subsection-title">Premium & Rare Teas</h3>
                    <div class="item-list">
                        <div class="list-item" onclick="openCustomizeModal('Lapsang Souchong', 3.2, 4.32, 'tea')">
                            <span class="list-item-name">Lapsang Souchong (smoked)</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £4.00</span>
                                <span class="discounted-price">Your price £3.20</span>
                            </div>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Jasmine Pearls', 3.2, 4.32, 'tea')">
                            <span class="list-item-name">Jasmine Pearls</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £4.00</span>
                                <span class="discounted-price">Your price £3.20</span>
                            </div>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Silver Needle', 3.2, 4.32, 'tea')">
                            <span class="list-item-name">Silver Needle</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £4.00</span>
                                <span class="discounted-price">Your price £3.20</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                2025 Teas & Cs. All rights reserved.<br>
                Designed, built & maintained by <a href="https://paul-banning.com" target="_blank" rel="noopener noreferrer">Paul Banning</a>
            </div>
        </div>

        <!-- Matcha Teas Page -->
        <div class="page" id="matcha-teas">
            <div class="menu-section">
                <h2 class="section-title">Matcha</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Matcha Thin Tea', 3.2, 4.32, 'matcha')">
                        <span class="list-item-name">Matcha Thin Tea (Usucha)</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.00</span>
                            <span class="discounted-price">Your price £3.20</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Classic Matcha Latte', 3.36, 4.48, 'matcha')">
                        <span class="list-item-name">Classic Matcha Latte</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.20</span>
                            <span class="discounted-price">Your price £3.36</span>
                        </div>
                    </div>
                </div>
                
                <div class="subsection">
                    <h3 class="subsection-title">Matcha Specials</h3>
                    <div class="item-list">
                        <div class="list-item" onclick="openCustomizeModal('Rose & Pink Coconut Matcha', 4.16, 5.28, 'matcha')">
                            <span class="list-item-name">Rose & Pink Coconut Matcha</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £5.20</span>
                                <span class="discounted-price">Your price £4.16</span>
                            </div>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Strawberry & Hibiscus Matcha', 4.0, 5.12, 'matcha')">
                            <span class="list-item-name">Strawberry & Hibiscus Matcha</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £5.00</span>
                                <span class="discounted-price">Your price £4.00</span>
                            </div>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Mango & Jasmine Matcha', 4.0, 5.12, 'matcha')">
                            <span class="list-item-name">Mango & Jasmine Matcha</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £5.00</span>
                                <span class="discounted-price">Your price £4.00</span>
                            </div>
                        </div>
                        <div class="list-item" onclick="openCustomizeModal('Blueberry & Elderflower Matcha', 4.0, 5.12, 'matcha')">
                            <span class="list-item-name">Blueberry & Elderflower Matcha</span>
                            <div class="price-container">
                                <span class="original-price">Normal price £5.00</span>
                                <span class="discounted-price">Your price £4.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                2025 Teas & Cs. All rights reserved.<br>
                Designed, built & maintained by <a href="https://paul-banning.com" target="_blank" rel="noopener noreferrer">Paul Banning</a>
            </div>
        </div>

        <!-- Coffees Page -->
        <div class="page" id="coffees">
            <div class="menu-section">
                <h2 class="section-title">Coffee</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Espresso', 2.24, 3.36, 'coffee')">
                        <span class="list-item-name">Espresso (2oz)</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £2.80</span>
                            <span class="discounted-price">Your price £2.24</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Americano', 2.24, 3.36, 'coffee')">
                        <span class="list-item-name">Americano</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £2.80</span>
                            <span class="discounted-price">Your price £2.24</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Long Black', 2.24, 3.36, 'coffee')">
                        <span class="list-item-name">Long Black (6oz)</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £2.80</span>
                            <span class="discounted-price">Your price £2.24</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Macchiato', 2.4, 3.52, 'coffee')">
                        <span class="list-item-name">Macchiato (4oz)</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.00</span>
                            <span class="discounted-price">Your price £2.40</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Piccolo/Cortado', 2.4, 3.52, 'coffee')">
                        <span class="list-item-name">Piccolo or Cortado (4oz)</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.00</span>
                            <span class="discounted-price">Your price £2.40</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Flat White', 2.72, 3.84, 'coffee')">
                        <span class="list-item-name">Flat White (6oz)</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.40</span>
                            <span class="discounted-price">Your price £2.72</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Latte', 2.88, 4.0, 'coffee')">
                        <span class="list-item-name">Latte</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.60</span>
                            <span class="discounted-price">Your price £2.88</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Cappuccino', 2.88, 4.0, 'coffee')">
                        <span class="list-item-name">Cappuccino</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.60</span>
                            <span class="discounted-price">Your price £2.88</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Mocha', 3.2, 4.32, 'coffee')">
                        <span class="list-item-name">Mocha w/ Mork 50% choc</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.00</span>
                            <span class="discounted-price">Your price £3.20</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                2025 Teas & Cs. All rights reserved.<br>
                Designed, built & maintained by <a href="https://paul-banning.com" target="_blank" rel="noopener noreferrer">Paul Banning</a>
            </div>
        </div>

        <!-- Specialties Page -->
        <div class="page" id="specialties">
            <div class="menu-section">
                <h2 class="section-title">Specials</h2>
                <div class="item-list">
                    <div class="list-item" onclick="openCustomizeModal('Mork 70% Chocolate', 3.04, 4.16, 'specialty')">
                        <span class="list-item-name">Mork 70% Original Dark Chocolate</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.80</span>
                            <span class="discounted-price">Your price £3.04</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Mork 85% Chocolate', 3.2, 4.32, 'specialty')">
                        <span class="list-item-name">Mork 85% Even Darker Chocolate</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.00</span>
                            <span class="discounted-price">Your price £3.20</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Chai Latte', 2.88, 4.0, 'specialty')">
                        <span class="list-item-name">Chai Latte</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £3.60</span>
                            <span class="discounted-price">Your price £2.88</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Chocolate Chai Latte', 3.36, 4.48, 'specialty')">
                        <span class="list-item-name">Chocolate Chai Latte</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.20</span>
                            <span class="discounted-price">Your price £3.36</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Dirty Chai Latte', 3.2, 4.32, 'specialty')">
                        <span class="list-item-name">Dirty Chai Latte</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.00</span>
                            <span class="discounted-price">Your price £3.20</span>
                        </div>
                    </div>
                    <div class="list-item" onclick="openCustomizeModal('Hojicha Salted Caramel', 3.36, 4.48, 'specialty')">
                        <span class="list-item-name">Hojicha Salted Caramel Latte</span>
                        <div class="price-container">
                            <span class="original-price">Normal price £4.20</span>
                            <span class="discounted-price">Your price £3.36</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                2025 Teas & Cs. All rights reserved.<br>
                Designed, built & maintained by <a href="https://paul-banning.com" target="_blank" rel="noopener noreferrer">Paul Banning</a>
            </div>
        </div>

        <!-- Customize Modal -->
        <div class="modal" id="customizeModal">
            <div class="modal-content">
                <h3 id="modalTitle">Customize Your Drink</h3>
                
                <div class="customize-section">
                    <div class="option-group">
                        <label class="option-label">Size:</label>
                        <div class="option-grid">
                            <button class="option-btn selected" data-size="regular" data-price="0">Regular</button>
                            <button class="option-btn" data-size="large" data-price="1.4">Large</button>
                        </div>
                    </div>

                    <div class="option-group">
                        <label class="option-label">Milk:</label>
                        <div class="option-grid">
                            <button class="option-btn selected" data-milk="whole" data-price="0">Whole</button>
                            <button class="option-btn" data-milk="skim" data-price="0">Skim</button>
                            <button class="option-btn" data-milk="oat" data-price="0.3">Oat</button>
                            <button class="option-btn" data-milk="almond" data-price="0.3">Almond</button>
                            <button class="option-btn" data-milk="soy" data-price="0.3">Soy</button>
                            <button class="option-btn" data-milk="none" data-price="0">None</button>
                        </div>
                    </div>

                    <div class="option-group">
                        <label class="option-label">Sweetener:</label>
                        <div class="option-grid">
                            <button class="option-btn selected" data-sweetener="none" data-price="0">None</button>
                            <button class="option-btn" data-sweetener="sugar" data-price="0">Sugar</button>
                            <button class="option-btn" data-sweetener="honey" data-price="0.2">Honey</button>
                            <button class="option-btn" data-sweetener="stevia" data-price="0.2">Stevia</button>
                        </div>
                    </div>

                    <div class="quantity-controls">
                        <button class="qty-btn" onclick="changeQuantity(-1)">-</button>
                        <span class="quantity" id="quantity">1</span>
                        <button class="qty-btn" onclick="changeQuantity(1)">+</button>
                    </div>

                    <div class="price-display">
                        Total: £<span id="totalPrice">0.00</span>
                    </div>
                </div>

                <div class="modal-buttons" id="addToCartButtons">
                    <button class="add-to-cart-btn" onclick="addToCart()">Add to Cart</button>
                    <button class="close-btn" onclick="closeModal()">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Order Confirmation Page -->
        <div class="page" id="orderConfirmation">
            <div class="menu-section">
                <h2 class="section-title">Order Confirmed!</h2>
                
                <div class="drink-making-animation">
                    <img src="images/coffeeanimate.GIF" alt="Coffee being prepared" class="coffee-gif">
                </div>

                <div style="text-align: center; margin: 20px 0;">
                    <p style="font-size: 18px; margin-bottom: 10px;">Your drink is being prepared!</p>
                    <p style="font-size: 14px; opacity: 0.8;">Please wait at your chair</p>
                </div>

                <div id="orderMessageDisplay" style="display: none; text-align: center; margin: 20px 0; padding: 15px; background: rgba(255, 255, 255, 0.1); border-radius: 10px;">
                    <h4 style="margin-bottom: 10px; color: white;">Special Instructions:</h4>
                    <p id="orderMessageText" style="font-size: 14px; color: white; font-style: italic; margin: 0;"></p>
                </div>

                <div class="rating-section">
                    <h3 style="text-align: center; margin-bottom: 15px;">Rate your experience</h3>
                    <div class="stars">
                        <span class="star" onclick="setRating(1)">★</span>
                        <span class="star" onclick="setRating(2)">★</span>
                        <span class="star" onclick="setRating(3)">★</span>
                        <span class="star" onclick="setRating(4)">★</span>
                        <span class="star" onclick="setRating(5)">★</span>
                    </div>
                    <button class="submit-rating-btn" onclick="submitRating()">Submit Rating</button>
                </div>

                <button class="back-home-btn" onclick="goToMainMenu()">Back to Menu</button>
            </div>
            <div class="copyright">
                2025 Teas & Cs. All rights reserved.<br>
                Designed, built & maintained by <a href="https://paul-banning.com" target="_blank" rel="noopener noreferrer">Paul Banning</a>
            </div>
        </div>

        <!-- Shopping Basket Page -->
        <div class="page" id="basketPage">
            <div class="menu-section">
                <h2 class="section-title">Your Basket</h2>
                
                <div class="basket-items" id="basketItems">
                    <!-- Basket items will be populated here -->
                </div>

                <div class="basket-summary">
                    <div class="basket-total">
                        <span>Total: £<span id="basketTotal">0.00</span></span>
                    </div>
                    
                    <div class="order-message-section">
                        <label for="customerEmail" class="message-label">
                            <span style="color: #FF8C42;">📧</span> Your Email (Optional):
                        </label>
                        <input type="email" id="customerEmail" class="customer-email" placeholder="your@email.com">
                        <div style="font-size: 12px; color: #666; margin-top: 5px; text-align: center;">
                            💡 Get order confirmation and receipt emailed to you
                        </div>
                    </div>
                    
                    <div class="order-message-section">
                        <label for="orderMessage" class="message-label">
                            <span style="color: #FF8C42;">📝</span> Special Instructions (Optional):
                        </label>
                        <textarea id="orderMessage" class="order-message" placeholder=""></textarea>
                        <div style="font-size: 12px; color: #666; margin-top: 5px; text-align: center;">
                            💡 Tip: Use this box for dietary requirements, special requests, or delivery instructions
                        </div>
                    </div>
                    
                    <div class="basket-buttons">
                        <button class="continue-shopping-btn" onclick="goToMainMenu()">Continue Shopping</button>
                        <button class="checkout-btn" onclick="proceedToCheckout()">Proceed to Checkout</button>
                    </div>
                </div>
            </div>
            <div class="copyright">
                2025 Teas & Cs. All rights reserved.<br>
                Designed, built & maintained by <a href="https://paul-banning.com" target="_blank" rel="noopener noreferrer">Paul Banning</a>
            </div>
        </div>

        <!-- Cart Summary -->
        <div class="cart-summary" id="cartSummary">
            <div class="cart-info">
                <span>Cart: <span id="cartCount">0</span> items</span>
                <span>Total: £<span id="cartTotal">0.00</span></span>
            </div>
            <button class="continue-shopping-btn" onclick="continueShopping()">Continue Shopping</button>
            <button class="checkout-btn" onclick="checkout()">Checkout</button>
        </div>

        <!-- QR Scanner Modal -->
        <div class="qr-scanner-modal" id="qrScannerModal">
            <div class="qr-scanner-content">
                <h3>Scan Chair QR Code</h3>
                <p>Point your camera at the QR code on your table or enter the chair number manually</p>
                
                <!-- Camera Permissions Section -->
                <div class="camera-permissions" id="cameraPermissions">
                    <div class="camera-icon">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#6B7A5A" stroke-width="2">
                            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                            <circle cx="12" cy="13" r="4"/>
                        </svg>
                    </div>
                    <h4>Camera Access Required</h4>
                    <p>To scan QR codes, we need permission to access your camera.</p>
                    <button type="button" class="camera-permission-btn" onclick="requestCameraPermission()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                        Allow Camera Access
                    </button>
                    <p class="camera-alternative">Or <button type="button" class="text-link" onclick="showManualInput()">enter chair number manually</button></p>
                </div>
                
                <!-- QR Scanner Container -->
                <div id="qr-reader" style="width: 100%; margin: 20px 0; display: none;"></div>
                
                <!-- Manual Input Section -->
                <div id="manualInput" style="border-top: 1px solid #eee; padding-top: 20px; margin-top: 20px; display: none;">
                    <h4>Enter Chair Number</h4>
                    <p style="margin-bottom: 15px; color: #666;">Type the chair number from your table:</p>
                    <input type="text" class="qr-input" id="qrInput" placeholder="Enter chair number (1-8)" maxlength="1" pattern="[1-8]">
                </div>
                
                <div class="qr-buttons">
                    <button type="button" class="qr-submit-btn" id="qrSubmitBtn" onclick="submitChairNumber()" style="display: none;">Set Chair</button>
                    <button type="button" class="qr-cancel-btn" onclick="closeQRScanner()">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Notification -->
        <div class="notification" id="notification"></div>
    </div>

    <script>
        // Global variables
        let currentPage = 'mainMenu';
        let cart = [];
        let currentItem = null;
        
        // EmailJS Configuration
        emailjs.init("0-zOlPcY__7KuMFMa");
        const EMAILJS_SERVICE_ID = "service_ob58ovs";
        const CAFE_TEMPLATE_ID = "template_j08h25k";
        const CUSTOMER_TEMPLATE_ID = "template_ha8jne4";
        let selectedOptions = {
            size: 'regular',
            milk: 'whole',
            sweetener: 'none'
        };
        let quantity = 1;
        let basePrice = 0;
        let largePrice = 0;

        // Haptic feedback function
        function triggerHapticFeedback() {
            if ('vibrate' in navigator) {
                navigator.vibrate(50); // 50ms vibration
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            updateCartDisplay();
            generateChairNumber();
            
            // Hide basket count initially
            document.getElementById('basketCount').style.display = 'none';
            
            // Add animation classes to elements
            animateElements();
        });

        // Function to add animation classes
        function animateElements() {
            // Animate menu items with staggered delay
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach((item, index) => {
                item.style.animationDelay = `${0.1 + (index * 0.1)}s`;
            });
            
            // Animate list items with staggered delay
            const listItems = document.querySelectorAll('.list-item');
            listItems.forEach((item, index) => {
                item.style.animationDelay = `${0.1 + (index * 0.1)}s`;
            });
            
            // Animate stars with staggered delay
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                star.style.animationDelay = `${0.1 + (index * 0.1)}s`;
            });
        }

        // Generate random chair number
        function generateChairNumber() {
            const chairs = ['One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight'];
            const randomChair = chairs[Math.floor(Math.random() * chairs.length)];
            document.getElementById('chairNumber').textContent = randomChair;
        }

        // QR Scanner functions
        let html5QrcodeScanner = null;

        function openQRScanner() {
            triggerHapticFeedback();
            document.getElementById('qrScannerModal').style.display = 'block';
            
            // Show camera permissions section by default
            document.getElementById('cameraPermissions').style.display = 'block';
            document.getElementById('qr-reader').style.display = 'none';
            document.getElementById('manualInput').style.display = 'none';
            document.getElementById('qrSubmitBtn').style.display = 'none';
            
            // Ensure minimal header is visible if we're not on main menu
            if (currentPage !== 'mainMenu') {
                document.getElementById('mainHeader').style.display = 'none';
                document.getElementById('minimalHeader').style.display = 'block';
            }
        }

        function closeQRScanner() {
            triggerHapticFeedback();
            document.getElementById('qrScannerModal').style.display = 'none';
            document.getElementById('qrInput').value = '';
            
            // Stop QR scanner
            if (html5QrcodeScanner) {
                html5QrcodeScanner.clear();
                html5QrcodeScanner = null;
            }
            
            // Reset to camera permissions view
            document.getElementById('cameraPermissions').style.display = 'block';
            document.getElementById('qr-reader').style.display = 'none';
            document.getElementById('manualInput').style.display = 'none';
            document.getElementById('qrSubmitBtn').style.display = 'none';
        }

        function requestCameraPermission() {
            triggerHapticFeedback();
            
            // Check if camera is supported
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                showNotification('Camera not supported on this device');
                return;
            }
            
            // Request camera permission
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function(stream) {
                    // Permission granted, initialize QR scanner
                    document.getElementById('cameraPermissions').style.display = 'none';
                    document.getElementById('qr-reader').style.display = 'block';
                    
                    if (!html5QrcodeScanner) {
                        html5QrcodeScanner = new Html5QrcodeScanner(
                            "qr-reader",
                            { 
                                fps: 10, 
                                qrbox: { width: 250, height: 250 },
                                aspectRatio: 1.0
                            },
                            false
                        );
                        
                        html5QrcodeScanner.render(onScanSuccess, onScanFailure);
                    }
                    
                    // Stop the stream as the QR scanner will handle it
                    stream.getTracks().forEach(track => track.stop());
                })
                .catch(function(err) {
                    console.log('Camera permission denied:', err);
                    showNotification('Camera access denied. Please use manual input.');
                    showManualInput();
                });
        }

        function showManualInput() {
            triggerHapticFeedback();
            document.getElementById('cameraPermissions').style.display = 'none';
            document.getElementById('qr-reader').style.display = 'none';
            document.getElementById('manualInput').style.display = 'block';
            document.getElementById('qrSubmitBtn').style.display = 'block';
            document.getElementById('qrInput').focus();
        }

        function onScanSuccess(decodedText, decodedResult) {
            // Handle QR code scan success
            console.log(`QR Code scanned: ${decodedText}`);
            
            // Extract chair number from QR code
            // Assuming QR codes contain text like "chair 1", "chair1", "1", etc.
            const chairMatch = decodedText.toLowerCase().match(/chair\s*(\d+)|^(\d+)$/);
            if (chairMatch) {
                const chairNumber = parseInt(chairMatch[1] || chairMatch[2]);
                if (chairNumber >= 1 && chairNumber <= 8) {
                    setChairNumber(chairNumber);
                    closeQRScanner();
                    showNotification(`Chair ${getChairName(chairNumber)} detected!`);
                } else {
                    showNotification('Invalid chair number in QR code');
                }
            } else {
                showNotification('QR code does not contain a valid chair number');
            }
        }

        function onScanFailure(error) {
            // Handle scan failure silently
            console.log(`QR scan failed: ${error}`);
        }

        function submitChairNumber() {
            triggerHapticFeedback();
            const input = document.getElementById('qrInput').value.trim();
            const chairNumber = parseInt(input);
            
            if (chairNumber >= 1 && chairNumber <= 8) {
                setChairNumber(chairNumber);
                closeQRScanner();
                showNotification(`Chair ${getChairName(chairNumber)} selected!`);
            } else {
                showNotification('Please enter a valid chair number (1-8)');
                document.getElementById('qrInput').focus();
            }
        }

        function setChairNumber(chairNumber) {
            const chairNames = ['One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight'];
            document.getElementById('chairNumber').textContent = chairNames[chairNumber - 1];
        }

        function getChairName(chairNumber) {
            const chairNames = ['One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight'];
            return chairNames[chairNumber - 1];
        }

        // Handle Enter key in QR input
        document.addEventListener('DOMContentLoaded', function() {
            const qrInput = document.getElementById('qrInput');
            if (qrInput) {
                qrInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        submitChairNumber();
                    }
                });
            }
        });

        // Navigation functions
        function showCategory(category) {
            triggerHapticFeedback();
            hideAllPages();
            document.getElementById(category).classList.add('active');
            
            // Switch to minimal header with back button only
            document.getElementById('mainHeader').style.display = 'none';
            document.getElementById('minimalHeader').style.display = 'block';
            document.getElementById('backBtn').style.display = 'none'; // Hide the floating back button since we have integrated one
            
            // Show fixed home button
            document.getElementById('fixedHomeBtn').style.display = 'flex';
            
            currentPage = category;
        }

        function goBack() {
            if (currentPage !== 'mainMenu') {
                triggerHapticFeedback();
                hideAllPages();
                document.getElementById('mainMenu').classList.add('active');
                
                // Switch back to main header
                document.getElementById('mainHeader').style.display = 'block';
                document.getElementById('minimalHeader').style.display = 'none';
                document.getElementById('backBtn').style.display = 'none';
                
                // Hide fixed home button on main menu
                document.getElementById('fixedHomeBtn').style.display = 'none';
                
                // Show cart summary if there are items in cart
                if (cart.length > 0) {
                    document.getElementById('cartSummary').style.display = 'block';
                }
                
                currentPage = 'mainMenu';
            }
        }

        function goToMainMenu() {
            triggerHapticFeedback();
            hideAllPages();
            document.getElementById('mainMenu').classList.add('active');
            
            // Switch back to main header
            document.getElementById('mainHeader').style.display = 'block';
            document.getElementById('minimalHeader').style.display = 'none';
            document.getElementById('backBtn').style.display = 'none';
            
            // Hide fixed home button on main menu
            document.getElementById('fixedHomeBtn').style.display = 'none';
            
            // Show cart summary if there are items in cart
            if (cart.length > 0) {
                document.getElementById('cartSummary').style.display = 'block';
            }
            
            currentPage = 'mainMenu';
        }

        function hideAllPages() {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
        }

        // Modal functions
        function openCustomizeModal(name, regularPrice, largePrice, type) {
            triggerHapticFeedback();
            currentItem = { name, type };
            basePrice = regularPrice;
            this.largePrice = largePrice;
            selectedOptions = { size: 'regular', milk: 'whole', sweetener: 'none' };
            quantity = 1;
            
            document.getElementById('modalTitle').textContent = `Customize ${name}`;
            document.getElementById('quantity').textContent = quantity;
            updateModalPrice();
            
            // Reset button selections
            document.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
            document.querySelectorAll('[data-size="regular"]').forEach(btn => btn.classList.add('selected'));
            document.querySelectorAll('[data-milk="whole"]').forEach(btn => btn.classList.add('selected'));
            document.querySelectorAll('[data-sweetener="none"]').forEach(btn => btn.classList.add('selected'));
            
            const modal = document.getElementById('customizeModal');
            modal.style.display = 'block';
            modal.classList.add('show');
            
            // Ensure minimal header is visible if we're not on main menu
            if (currentPage !== 'mainMenu') {
                document.getElementById('mainHeader').style.display = 'none';
                document.getElementById('minimalHeader').style.display = 'block';
            }
        }

        function closeModal() {
            triggerHapticFeedback();
            const modal = document.getElementById('customizeModal');
            modal.style.display = 'none';
            modal.classList.remove('show');
        }

        function changeQuantity(delta) {
            triggerHapticFeedback();
            quantity = Math.max(1, quantity + delta);
            document.getElementById('quantity').textContent = quantity;
            updateModalPrice();
        }

        function updateModalPrice() {
            let total = basePrice;
            
            // Add size price
            if (selectedOptions.size === 'large') {
                total = largePrice;
            }
            
            // Add milk price
            const milkBtn = document.querySelector(`[data-milk="${selectedOptions.milk}"]`);
            if (milkBtn) {
                total += parseFloat(milkBtn.dataset.price);
            }
            
            // Add sweetener price
            const sweetenerBtn = document.querySelector(`[data-sweetener="${selectedOptions.sweetener}"]`);
            if (sweetenerBtn) {
                total += parseFloat(sweetenerBtn.dataset.price);
            }
            
            total *= quantity;
            document.getElementById('totalPrice').textContent = total.toFixed(2);
        }

        function addToCart() {
            triggerHapticFeedback();
            const item = {
                name: currentItem.name,
                type: currentItem.type,
                size: selectedOptions.size,
                milk: selectedOptions.milk,
                sweetener: selectedOptions.sweetener,
                quantity: quantity,
                price: parseFloat(document.getElementById('totalPrice').textContent)
            };
            
            cart.push(item);
            updateCartDisplay();
            closeModal();
            
            showNotification('Added to cart!');
        }

        function updateCartDisplay() {
            const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);
            
            // Update cart summary
            document.getElementById('cartCount').textContent = cartCount;
            document.getElementById('cartTotal').textContent = cartTotal.toFixed(2);
            
            // Update basket icon count
            document.getElementById('basketCount').textContent = cartCount;
            
            // Don't show cart summary if we're on the basket page
            if (currentPage === 'basketPage') {
                document.getElementById('cartSummary').style.display = 'none';
                document.getElementById('basketCount').style.display = 'flex';
            } else if (cartCount > 0) {
                // Show cart summary every time items are added (unless on basket page)
                document.getElementById('cartSummary').style.display = 'block';
                document.getElementById('basketCount').style.display = 'flex';
            } else {
                document.getElementById('cartSummary').style.display = 'none';
                document.getElementById('basketCount').style.display = 'none';
            }
        }

        function checkout() {
            if (cart.length === 0) return;
            
            triggerHapticFeedback();
            showBasket();
        }

        function proceedToCheckout() {
            if (cart.length === 0) return;
            
            triggerHapticFeedback();
            
            // Get the order message
            const orderMessage = document.getElementById('orderMessage').value.trim();
            
            // Store order details for confirmation
            const orderDetails = {
                items: [...cart],
                message: orderMessage,
                total: cart.reduce((sum, item) => sum + item.price, 0),
                timestamp: new Date().toLocaleString()
            };
            
            // Send order notification email
            sendOrderEmail(orderDetails);
            
            // In a real app, you would send this to your backend
            console.log('Order submitted:', orderDetails);
            
            // Show order message in confirmation if provided
            const messageDisplay = document.getElementById('orderMessageDisplay');
            const messageText = document.getElementById('orderMessageText');
            
            if (orderMessage) {
                messageDisplay.style.display = 'block';
                messageText.textContent = orderMessage;
            } else {
                messageDisplay.style.display = 'none';
            }
            
            // Show order confirmation
            hideAllPages();
            document.getElementById('orderConfirmation').classList.add('active');
            
            // Switch to minimal header with back button only
            document.getElementById('mainHeader').style.display = 'none';
            document.getElementById('minimalHeader').style.display = 'block';
            document.getElementById('backBtn').style.display = 'none';
            
            // Show fixed home button
            document.getElementById('fixedHomeBtn').style.display = 'flex';
            
            currentPage = 'orderConfirmation';
            
            // Clear cart after checkout
            cart = [];
            updateCartDisplay();
            
            // Clear the message field
            document.getElementById('orderMessage').value = '';
        }

        function continueShopping() {
            triggerHapticFeedback();
            // Hide the cart summary section and go to main menu
            document.getElementById('cartSummary').style.display = 'none';
            
            // Go to main menu but don't show cart summary
            hideAllPages();
            document.getElementById('mainMenu').classList.add('active');
            
            // Switch back to main header
            document.getElementById('mainHeader').style.display = 'block';
            document.getElementById('minimalHeader').style.display = 'none';
            document.getElementById('backBtn').style.display = 'none';
            
            // Hide fixed home button on main menu
            document.getElementById('fixedHomeBtn').style.display = 'none';
            
            // Keep cart summary hidden when continuing shopping
            document.getElementById('cartSummary').style.display = 'none';
            
            currentPage = 'mainMenu';
        }

        function showBasket() {
            triggerHapticFeedback();
            hideAllPages();
            document.getElementById('basketPage').classList.add('active');
            
            // Switch to minimal header with back button only
            document.getElementById('mainHeader').style.display = 'none';
            document.getElementById('minimalHeader').style.display = 'block';
            document.getElementById('backBtn').style.display = 'none';
            
            // Show fixed home button
            document.getElementById('fixedHomeBtn').style.display = 'flex';
            
            // Hide the cart summary when viewing basket
            document.getElementById('cartSummary').style.display = 'none';
            
            currentPage = 'basketPage';
            updateBasketDisplay();
        }

        function updateBasketDisplay() {
            const basketItems = document.getElementById('basketItems');
            const basketTotal = document.getElementById('basketTotal');
            
            basketItems.innerHTML = '';
            
            if (cart.length === 0) {
                basketItems.innerHTML = '<p style="text-align: center; color: #666; margin: 20px 0;">Your basket is empty</p>';
                basketTotal.textContent = '0.00';
                return;
            }
            
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            basketTotal.textContent = total.toFixed(2);
            
            cart.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'basket-item';
                
                const details = [];
                if (item.size !== 'regular') details.push(item.size);
                if (item.milk !== 'whole') details.push(item.milk);
                if (item.sweetener !== 'none') details.push(item.sweetener);
                
                itemElement.innerHTML = `
                    <div class="basket-item-info">
                        <div class="basket-item-name">${item.name} x${item.quantity}</div>
                        <div class="basket-item-details">${details.length > 0 ? details.join(', ') : 'Standard'}</div>
                    </div>
                    <div class="basket-item-price">£${item.price.toFixed(2)}</div>
                    <button class="basket-item-remove" onclick="removeFromBasket(${index})">×</button>
                `;
                
                basketItems.appendChild(itemElement);
            });
        }

        function removeFromBasket(index) {
            triggerHapticFeedback();
            cart.splice(index, 1);
            updateCartDisplay();
            updateBasketDisplay();
            
            if (cart.length === 0) {
                showNotification('Basket cleared');
            } else {
                showNotification('Item removed');
            }
        }

        function setRating(rating) {
            triggerHapticFeedback();
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function submitRating() {
            triggerHapticFeedback();
            const activeStars = document.querySelectorAll('.star.active').length;
            if (activeStars > 0) {
                showNotification('Thank you for your rating!');
                setTimeout(() => {
                    goToMainMenu();
                }, 1500);
            }
        }

        function sendOrderEmail(orderDetails) {
            // Get customer email if provided
            const customerEmail = document.getElementById('customerEmail').value.trim();
            
            // Prepare data for both templates
            const templateData = {
                order_time: orderDetails.timestamp,
                order_total: orderDetails.total.toFixed(2),
                order_items: formatOrderItems(orderDetails.items),
                special_instructions: orderDetails.message || '',
                chair_number: 'Chair 1',
                // Alternative variable names in case template uses different ones
                order_date: orderDetails.timestamp,
                total: orderDetails.total.toFixed(2),
                items: formatOrderItems(orderDetails.items),
                message: orderDetails.message || '',
                to_email: 'paul@paul-banning.com'
            };
            
            // Send cafe notification email
            console.log('Sending cafe email with data:', templateData);
            console.log('Service ID:', EMAILJS_SERVICE_ID);
            console.log('Template ID:', CAFE_TEMPLATE_ID);
            
            emailjs.send(EMAILJS_SERVICE_ID, CAFE_TEMPLATE_ID, templateData)
                .then(function(response) {
                    console.log('Cafe notification sent successfully:', response);
                    showNotification('Order sent to cafe successfully!');
                })
                .catch(function(error) {
                    console.error('Cafe email failed - Full error:', error);
                    console.error('Error status:', error.status);
                    console.error('Error text:', error.text);
                    showNotification(`Email failed: ${error.text || error.message}`);
                    // Fallback to clipboard
                    copyOrderToClipboard(formatOrderEmail(orderDetails));
                });
            
            // Send customer confirmation email if email provided
            if (customerEmail && customerEmail.includes('@')) {
                const customerData = {
                    ...templateData,
                    customer_email: customerEmail
                };
                
                emailjs.send(EMAILJS_SERVICE_ID, CUSTOMER_TEMPLATE_ID, customerData)
                    .then(function(response) {
                        console.log('Customer confirmation sent successfully:', response);
                        showNotification(`Confirmation sent to ${customerEmail}`);
                    })
                    .catch(function(error) {
                        console.error('Customer email failed:', error);
                        showNotification('Cafe notified, customer email failed');
                    });
            }
            
            // Store order locally for backup
            storeOrderLocally(orderDetails);
            
            // Log order details to console for debugging
            console.log('Order Details:', orderDetails);
        }

        function formatOrderItems(items) {
            return items.map((item, index) => {
                return `${index + 1}. ${item.name} x${item.quantity}
   Size: ${item.size}
   Milk: ${item.milk}
   Sweetener: ${item.sweetener}
   Price: £${item.price.toFixed(2)}`;
            }).join('\n\n');
        }

        function copyOrderToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    console.log('Order copied to clipboard');
                }).catch(err => {
                    console.error('Failed to copy to clipboard:', err);
                });
            } else {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
            }
        }

        function storeOrderLocally(orderDetails) {
            try {
                const orders = JSON.parse(localStorage.getItem('pendingOrders') || '[]');
                orders.push({
                    ...orderDetails,
                    timestamp: new Date().toISOString(),
                    id: Date.now()
                });
                localStorage.setItem('pendingOrders', JSON.stringify(orders));
                console.log('Order stored locally');
            } catch (error) {
                console.error('Failed to store order locally:', error);
            }
        }

        function getPendingOrders() {
            try {
                return JSON.parse(localStorage.getItem('pendingOrders') || '[]');
            } catch (error) {
                console.error('Failed to get pending orders:', error);
                return [];
            }
        }

        function clearPendingOrders() {
            try {
                localStorage.removeItem('pendingOrders');
                console.log('Pending orders cleared');
            } catch (error) {
                console.error('Failed to clear pending orders:', error);
            }
        }

        // Add a function to check for pending orders on page load
        function checkPendingOrders() {
            const pendingOrders = getPendingOrders();
            if (pendingOrders.length > 0) {
                console.log(`Found ${pendingOrders.length} pending orders`);
                // You could show a notification here if needed
            }
        }

        // Call this function when the page loads
        window.addEventListener('load', function() {
            checkPendingOrders();
        });

        function formatOrderEmail(orderDetails) {
            let emailBody = `NEW ORDER RECEIVED\n`;
            emailBody += `========================\n\n`;
            emailBody += `Order Time: ${orderDetails.timestamp}\n`;
            emailBody += `Total: £${orderDetails.total.toFixed(2)}\n\n`;
            
            emailBody += `ITEMS ORDERED:\n`;
            emailBody += `----------------\n`;
            orderDetails.items.forEach((item, index) => {
                emailBody += `${index + 1}. ${item.name}\n`;
                emailBody += `   Size: ${item.size}\n`;
                emailBody += `   Milk: ${item.milk}\n`;
                emailBody += `   Sweetener: ${item.sweetener}\n`;
                emailBody += `   Quantity: ${item.quantity}\n`;
                emailBody += `   Price: £${item.price.toFixed(2)}\n\n`;
            });
            
            if (orderDetails.message) {
                emailBody += `SPECIAL INSTRUCTIONS:\n`;
                emailBody += `---------------------\n`;
                emailBody += `${orderDetails.message}\n\n`;
            }
            
            emailBody += `========================\n`;
            emailBody += `Order sent from Teas & Cs PWA\n`;
            emailBody += `Generated automatically\n`;
            
            return emailBody;
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 2000);
        }

        // Event listeners for option buttons
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('option-btn')) {
                triggerHapticFeedback();
                const group = e.target.parentElement;
                const buttons = group.querySelectorAll('.option-btn');
                buttons.forEach(btn => btn.classList.remove('selected'));
                e.target.classList.add('selected');
                
                // Update selected options
                if (e.target.dataset.size) {
                    selectedOptions.size = e.target.dataset.size;
                }
                if (e.target.dataset.milk) {
                    selectedOptions.milk = e.target.dataset.milk;
                }
                if (e.target.dataset.sweetener) {
                    selectedOptions.sweetener = e.target.dataset.sweetener;
                }
                
                updateModalPrice();
            }
        });

        // Close modal when clicking outside
        document.getElementById('customizeModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Close QR scanner modal when clicking outside
        document.getElementById('qrScannerModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeQRScanner();
            }
        });

        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
</body>
</html>

